<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>IPTV M3U Checker – Validate & Clean Your IPTV Playlists Easily</title>

  <!-- SEO Meta Tags -->
  <meta name="description" content="Check and verify your IPTV M3U and M3U8 playlists online. Identify working channels, remove broken links, and generate cleaned playlists effortlessly with our IPTV M3U Checker tool." />
  <meta name="keywords" content="IPTV checker, M3U checker, M3U8 playlist checker, IPTV playlist validator, IPTV channel status, IPTV playlist cleaner, IPTV stream checker, IPTV M3U online tool" />
  <meta name="robots" content="index, follow" />
  <link rel="canonical" href="iptv-m3u-checker" />

  <!-- Social Meta (Open Graph) -->
  <meta property="og:title" content="IPTV M3U Checker – Validate & Clean Your IPTV Playlists Easily" />
  <meta property="og:description" content="Use our IPTV M3U Checker to verify channel status and create clean playlists from your IPTV M3U or M3U8 files quickly and securely." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://yourdomain.com/iptv-m3u-checker" />
  <meta property="og:image" content="https://yourdomain.com/assets/iptv-checker-preview.png" />

  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #1a202c; /* Tailwind gray-900 */
      color: #e2e8f0; /* Tailwind gray-200 */
    }
    .fade-in {
      animation: fadeIn 0.5s ease-in-out forwards;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    /* FAQ Accordion */
    details > summary {
      cursor: pointer;
      padding: 0.5rem 1rem;
      background-color: #2d3748; /* Tailwind gray-800 */
      border-radius: 0.375rem;
      font-weight: 600;
      outline-offset: 4px;
      list-style: none;
    }
    details[open] > summary {
      background-color: #4c51bf; /* Indigo-700 */
      color: #e0e7ff; /* Indigo-100 */
    }
    details > summary::-webkit-details-marker {
      display: none;
    }
    details > summary:before {
      content: "▶";
      display: inline-block;
      margin-right: 0.5rem;
      transition: transform 0.3s ease;
    }
    details[open] > summary:before {
      transform: rotate(90deg);
    }
    details > div {
      padding: 1rem 1.5rem;
      background-color: #2d3748;
      border-radius: 0 0 0.375rem 0.375rem;
      margin-bottom: 1rem;
      line-height: 1.5;
      color: #cbd5e0; /* gray-400 */
    }
  </style>
</head>
<body>

  <main class="container mx-auto max-w-5xl p-6" role="main">
    <h1 class="text-4xl font-extrabold text-white text-center mb-4">IPTV M3U Checker</h1>
    <p class="text-center text-gray-400 mb-10 max-w-3xl mx-auto">
      Check and validate your IPTV M3U or M3U8 playlists easily. Identify online channels, remove broken streams, and generate clean playlists in seconds.
    </p>

    <!-- TOOL SECTION -->
    <section class="bg-gray-800 rounded-lg shadow p-6 mb-12 fade-in" aria-label="IPTV M3U Checker Tool">
      <form id="iptv-form" class="space-y-6" onsubmit="return false;">
        <div>
          <label for="m3u-file" class="block text-gray-300 mb-2 font-semibold">Upload M3U/M3U8 File</label>
          <input type="file" id="m3u-file" accept=".m3u,.m3u8" 
            class="block w-full text-sm text-gray-300
            file:mr-4 file:border-0 file:bg-indigo-600 file:text-white file:py-2 file:px-4
            file:rounded hover:file:bg-indigo-700"
            aria-describedby="upload-instruction" />
          <small id="upload-instruction" class="text-gray-400">Choose your playlist file for scanning</small>
        </div>

        <div class="text-center text-sm text-gray-400 font-semibold my-2">OR</div>

        <div>
          <label for="m3u-text" class="block text-gray-300 mb-2 font-semibold">Paste M3U Content</label>
          <textarea id="m3u-text" rows="6" placeholder="#EXTM3U
#EXTINF:-1, Channel Name
http://..."
            class="w-full bg-gray-900 border border-gray-700 rounded p-3 text-sm resize-y
            focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500
            text-gray-200"
            aria-describedby="paste-instruction"></textarea>
          <small id="paste-instruction" class="text-gray-400">Paste your playlist content here if you don't upload a file</small>
        </div>

        <button id="check-btn" type="submit"
          class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded
          transition-colors duration-200" aria-label="Check IPTV channels status">Check Channels</button>
      </form>

      <!-- RESULTS -->
      <section id="results-section" class="mt-8 hidden" aria-live="polite" aria-label="IPTV Channel Check Results">
        <div class="flex flex-wrap justify-center gap-3 mb-4">
          <button id="select-online-btn" class="bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded transition-colors" type="button" aria-label="Select online channels only">Select Online</button>
          <button id="select-all-btn" class="bg-gray-600 hover:bg-gray-700 text-white py-2 px-4 rounded transition-colors" type="button" aria-label="Select all channels">Select All</button>
          <button id="deselect-all-btn" class="bg-gray-600 hover:bg-gray-700 text-white py-2 px-4 rounded transition-colors" type="button" aria-label="Deselect all channels">Deselect All</button>
        </div>

        <div class="overflow-x-auto rounded-lg border border-gray-700" role="region" aria-label="Channel status table">
          <table class="w-full text-left text-gray-300 text-sm" role="grid" aria-describedby="results-desc">
            <caption id="results-desc" class="sr-only">Results of IPTV channels status check with options to select channels</caption>
            <thead class="bg-gray-700 text-gray-400">
              <tr>
                <th class="p-2 w-12"><input type="checkbox" id="select-all-header" aria-label="Select All Channels"/></th>
                <th class="p-2">Channel Name</th>
                <th class="p-2 w-24">Status</th>
                <th class="p-2">URL</th>
              </tr>
            </thead>
            <tbody id="results-body" class="divide-y divide-gray-800"></tbody>
          </table>
        </div>

        <div class="text-center mt-6">
          <button id="generate-btn"
            class="bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-3 px-8 rounded
            transition-colors duration-200" type="button" aria-label="Generate new M3U playlist from selected channels">Generate New M3U from Selection</button>
          <p id="generate-feedback" class="text-green-400 mt-2 h-6" role="status" aria-live="polite"></p>
        </div>
      </section>

      <!-- OUTPUT -->
      <section id="output-section" class="mt-10 hidden fade-in" aria-live="polite" aria-label="Cleaned IPTV Playlist Output">
        <h2 class="text-xl font-semibold text-center mb-4 text-white">Your Cleaned M3U Playlist</h2>
        <textarea id="output-m3u" rows="10" readonly
          class="w-full bg-gray-900 border border-gray-700 rounded p-3 text-sm mb-4
          text-gray-200 resize-y" aria-label="Cleaned M3U playlist content"></textarea>
        <div class="flex flex-wrap justify-center gap-3">
          <button id="copy-btn" class="bg-green-600 hover:bg-green-700 text-white py-2 px-5 rounded transition-colors" type="button" aria-label="Copy playlist to clipboard">Copy to Clipboard</button>
          <button id="download-btn" class="bg-purple-600 hover:bg-purple-700 text-white py-2 px-5 rounded transition-colors" type="button" aria-label="Download playlist as M3U file">Download .m3u File</button>
        </div>
        <p id="copy-feedback" class="text-center text-green-400 mt-2 h-4" role="status" aria-live="polite"></p>
      </section>
    </section>

    <!-- FAQ SECTION -->
    <section class="bg-gray-800 rounded-lg shadow p-6 fade-in" aria-label="Frequently Asked Questions about IPTV M3U Checker">
      <h2 class="text-3xl font-bold text-white text-center mb-8">Frequently Asked Questions (FAQ)</h2>

      <details open>
        <summary>What is an IPTV List Checker?</summary>
        <div>
          An IPTV List Checker is an application that scans and verifies the status of channels included in your IPTV playlist.
        </div>
      </details>

      <details>
        <summary>What is an IPTV Playlist?</summary>
        <div>
          An IPTV playlist is a file (usually <code>.m3u</code> or <code>.m3u8</code>) containing URLs of TV channels or streaming sources used by IPTV services.
        </div>
      </details>

      <details>
        <summary>What Does a Checker Do?</summary>
        <div>
          <ul class="list-disc list-inside space-y-1 text-gray-300">
            <li><strong>Scanning:</strong> Reviews each channel URL.</li>
            <li><strong>Verification:</strong> Connects to streams to see if channels are online.</li>
            <li><strong>Analysis:</strong> Reports channel status (online/offline/error).</li>
          </ul>
        </div>
      </details>

      <details>
        <summary>Why Use a Checker?</summary>
        <div>
          <ul class="list-disc list-inside space-y-1 text-gray-300">
            <li><strong>Identify Broken Channels:</strong> Remove non-working channels.</li>
            <li><strong>Optimize Playlist:</strong> Improve performance and experience.</li>
            <li><strong>Troubleshoot Issues:</strong> Isolate channel errors.</li>
            <li><strong>Manage Large Playlists:</strong> Keep playlists tidy and reliable.</li>
          </ul>
        </div>
      </details>

      <details>
        <summary>How Fast is the Checking Process?</summary>
        <div>
          The tool attempts to connect to each channel URL with a timeout (about 4 seconds per channel). Overall speed depends on your internet connection and playlist size.
        </div>
      </details>

      <details>
        <summary>Is This Tool Free and Safe?</summary>
        <div>
          Yes! This tool runs entirely in your browser—no data is sent to any server. Your playlist content stays private on your device.
        </div>
      </details>
    </section>
  </main>

  <!-- Loading Overlay -->
  <div id="loading-overlay"
    class="fixed inset-0 bg-gray-900 bg-opacity-95 flex flex-col items-center justify-center z-50 hidden" role="alert" aria-live="assertive" aria-busy="true">
    <div class="flex flex-col items-center space-y-4">
      <div class="animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-indigo-500" aria-hidden="true"></div>
      <div class="text-center">
        <div class="text-xl font-semibold text-white">Checking Channels...</div>
        <div id="loading-progress" class="text-lg text-indigo-400 mt-1">0%</div>
        <div id="loading-current" class="text-sm text-gray-400 mt-1">Initializing...</div>
      </div>
      <div class="w-64 h-2 bg-gray-800 rounded-full overflow-hidden" aria-hidden="true">
        <div id="progress-bar-fill" class="h-full bg-indigo-500 transition-all duration-300 ease-in-out" style="width: 0%;"></div>
      </div>
    </div>
  </div>

  <!-- Your existing script remains unchanged -->

  <script>
    // (Existing JavaScript from your snippet, no changes needed here)
  // Wait for DOM ready
  document.addEventListener('DOMContentLoaded', () => {
    const form = document.getElementById('iptv-form');
    const fileInput = document.getElementById('m3u-file');
    const textInput = document.getElementById('m3u-text');
    const checkBtn = document.getElementById('check-btn');
    const resultsSection = document.getElementById('results-section');
    const resultsBody = document.getElementById('results-body');
    const loadingOverlay = document.getElementById('loading-overlay');
    const loadingProgress = document.getElementById('loading-progress');
    const loadingCurrent = document.getElementById('loading-current');
    const progressBarFill = document.getElementById('progress-bar-fill');
    const selectOnlineBtn = document.getElementById('select-online-btn');
    const selectAllBtn = document.getElementById('select-all-btn');
    const deselectAllBtn = document.getElementById('deselect-all-btn');
    const selectAllHeaderCheckbox = document.getElementById('select-all-header');
    const generateBtn = document.getElementById('generate-btn');
    const outputSection = document.getElementById('output-section');
    const outputM3U = document.getElementById('output-m3u');
    const copyBtn = document.getElementById('copy-btn');
    const downloadBtn = document.getElementById('download-btn');
    const generateFeedback = document.getElementById('generate-feedback');
    const copyFeedback = document.getElementById('copy-feedback');

    let channels = []; // Will hold parsed channel info {name, url, status, selected}

    // Helper: Parse M3U content into channel objects
    function parseM3U(content) {
      const lines = content.split(/\r?\n/).map(l => l.trim());
      const parsed = [];
      for(let i = 0; i < lines.length; i++) {
        if(lines[i].startsWith('#EXTINF')) {
          const nameMatch = lines[i].match(/,(.*)$/);
          const name = nameMatch ? nameMatch[1].trim() : 'Unknown';
          let url = '';
          if(i + 1 < lines.length) {
            url = lines[i+1].trim();
            i++;
          }
          if(url) {
            parsed.push({name, url, status: 'unchecked', selected: true});
          }
        }
      }
      return parsed;
    }

    // Hybrid check: first try fetch with no-cors, fallback to audio element
    function checkURLByFetch(url, timeout = 4000) {
      return new Promise(async (resolve) => {
        try {
          const controller = new AbortController();
          const id = setTimeout(() => controller.abort(), timeout);
          // mode: 'no-cors' -> opaque response, but no error if request sent
          await fetch(url, {method: 'HEAD', mode: 'no-cors', signal: controller.signal});
          clearTimeout(id);
          resolve(true);
        } catch {
          resolve(false);
        }
      });
    }

    function checkURLByAudio(url, timeout = 4000) {
      return new Promise((resolve) => {
        const audio = new Audio();
        let done = false;
        const timer = setTimeout(() => {
          if (!done) {
            done = true;
            audio.src = '';
            resolve(false);
          }
        }, timeout);

        audio.onerror = () => {
          if (!done) {
            done = true;
            clearTimeout(timer);
            resolve(false);
          }
        };

        audio.oncanplay = () => {
          if (!done) {
            done = true;
            clearTimeout(timer);
            resolve(true);
          }
        };

        audio.src = url;
        audio.load();
      });
    }

    async function checkChannel(url) {
      let online = await checkURLByFetch(url);
      if (!online) {
        online = await checkURLByAudio(url);
      }
      return online;
    }

    // Update progress UI
    function updateLoadingProgress(current, total, currentName) {
      const percent = Math.floor((current / total) * 100);
      loadingProgress.textContent = `${percent}%`;
      loadingCurrent.textContent = `Checking: ${currentName}`;
      progressBarFill.style.width = `${percent}%`;
    }

    // Render the results table rows
    function renderResults() {
      resultsBody.innerHTML = '';
      channels.forEach((ch, idx) => {
        const tr = document.createElement('tr');
        tr.className = 'border-b border-gray-700';

        // Checkbox
        const tdCheck = document.createElement('td');
        tdCheck.className = 'p-2 text-center';
        const checkbox = document.createElement('input');
        checkbox.type = 'checkbox';
        checkbox.checked = ch.selected;
        checkbox.setAttribute('aria-label', `Select channel ${ch.name}`);
        checkbox.addEventListener('change', () => {
          ch.selected = checkbox.checked;
          updateSelectAllHeader();
        });
        tdCheck.appendChild(checkbox);

        // Name
        const tdName = document.createElement('td');
        tdName.className = 'p-2';
        tdName.textContent = ch.name;

        // Status
        const tdStatus = document.createElement('td');
        tdStatus.className = 'p-2';
        tdStatus.textContent = ch.status === 'online' ? 'Online' : ch.status === 'offline' ? 'Offline' : 'Checking...';
        tdStatus.classList.add(ch.status === 'online' ? 'text-green-400' : ch.status === 'offline' ? 'text-red-500' : 'text-yellow-400');

        // URL
        const tdUrl = document.createElement('td');
        tdUrl.className = 'p-2 break-words max-w-xs';
        const urlLink = document.createElement('a');
        urlLink.href = ch.url;
        urlLink.target = '_blank';
        urlLink.rel = 'noopener noreferrer';
        urlLink.textContent = ch.url;
        urlLink.className = 'underline hover:text-indigo-400';
        tdUrl.appendChild(urlLink);

        tr.append(tdCheck, tdName, tdStatus, tdUrl);
        resultsBody.appendChild(tr);
      });
    }

    // Update the header "Select All" checkbox based on individual selections
    function updateSelectAllHeader() {
      const allSelected = channels.length > 0 && channels.every(ch => ch.selected);
      selectAllHeaderCheckbox.checked = allSelected;
      selectAllHeaderCheckbox.indeterminate = !allSelected && channels.some(ch => ch.selected);
    }

    // Show loading overlay
    function showLoading() {
      loadingOverlay.classList.remove('hidden');
      loadingProgress.textContent = '0%';
      loadingCurrent.textContent = 'Initializing...';
      progressBarFill.style.width = '0%';
    }

    // Hide loading overlay
    function hideLoading() {
      loadingOverlay.classList.add('hidden');
    }

    // Handle form submission ("Check Channels" button)
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      generateFeedback.textContent = '';
      copyFeedback.textContent = '';
      outputSection.classList.add('hidden');
      resultsSection.classList.remove('hidden');
      resultsBody.innerHTML = '';

      // Get M3U content from file or textarea
      let content = '';
      if (fileInput.files.length > 0) {
        const file = fileInput.files[0];
        content = await file.text();
      } else {
        content = textInput.value.trim();
      }

      if (!content) {
        alert('Please upload a file or paste M3U content.');
        return;
      }

      // Parse channels
      channels = parseM3U(content);
      if (channels.length === 0) {
        alert('No valid channels found in the playlist.');
        return;
      }

      // Initialize UI
      channels.forEach(ch => {
        ch.status = 'checking';
        ch.selected = true;
      });
      renderResults();
      updateSelectAllHeader();
      showLoading();

      // Check channels sequentially with status update
      for (let i = 0; i < channels.length; i++) {
        updateLoadingProgress(i, channels.length, channels[i].name);
        const isOnline = await checkChannel(channels[i].url);
        channels[i].status = isOnline ? 'online' : 'offline';
        renderResults();
      }

      updateLoadingProgress(channels.length, channels.length, 'Done');
      hideLoading();
    });

    // Select Online channels only
    selectOnlineBtn.addEventListener('click', () => {
      channels.forEach(ch => ch.selected = (ch.status === 'online'));
      renderResults();
      updateSelectAllHeader();
    });

    // Select All channels
    selectAllBtn.addEventListener('click', () => {
      channels.forEach(ch => ch.selected = true);
      renderResults();
      updateSelectAllHeader();
    });

    // Deselect All channels
    deselectAllBtn.addEventListener('click', () => {
      channels.forEach(ch => ch.selected = false);
      renderResults();
      updateSelectAllHeader();
    });

    // Header checkbox toggle select/deselect all
    selectAllHeaderCheckbox.addEventListener('change', () => {
      const checked = selectAllHeaderCheckbox.checked;
      channels.forEach(ch => ch.selected = checked);
      renderResults();
      updateSelectAllHeader();
    });

    // Generate new M3U from selection
    generateBtn.addEventListener('click', () => {
      if (!channels || channels.length === 0) return;
      const selectedChannels = channels.filter(ch => ch.selected);
      if (selectedChannels.length === 0) {
        alert('No channels selected.');
        return;
      }
      let output = '#EXTM3U\n';
      selectedChannels.forEach(ch => {
        output += `#EXTINF:-1,${ch.name}\n${ch.url}\n`;
      });
      outputM3U.value = output;
      outputSection.classList.remove('hidden');
      generateFeedback.textContent = `${selectedChannels.length} channels included in the new playlist.`;
      copyFeedback.textContent = '';
    });

    // Copy to clipboard
    copyBtn.addEventListener('click', () => {
      outputM3U.select();
      outputM3U.setSelectionRange(0, 99999); // mobile compatibility
      navigator.clipboard.writeText(outputM3U.value).then(() => {
        copyFeedback.textContent = 'Copied to clipboard!';
        setTimeout(() => copyFeedback.textContent = '', 3000);
      });
    });

    // Download as .m3u file
    downloadBtn.addEventListener('click', () => {
      const blob = new Blob([outputM3U.value], { type: 'audio/x-mpegurl' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'cleaned_playlist.m3u';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    });
  });


</script>

</body>
</html>

